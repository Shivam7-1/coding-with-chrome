/*! For license information please see phaser_extras.min.js.LICENSE.txt */
class PhaserExtras{clear(){var e=document.getElementsByTagName("canvas");if(e)for(const t of e)t.style&&"none"==t.style.touchAction&&"none"==t.style.userSelect&&t.remove();document.getElementById("ghostery-tracker-tally")?.remove(),document.getElementById("ghostery-box")?.remove(),document.getElementById("ghostery-pb-background")?.remove()}static addGroupSprite(e,t,a,r,s,n){e=e.physics.add.sprite(t,a,r),s&&s.add(e),e.checkWorldBounds=!0,e.outOfBoundsKill=!0,e.z=100,n&&"function"==typeof n&&n(e)}static VerticalObstacleGenerator(e,t,a,r,s,n,o,i,h,c){var d=PhaserExtras.getSpriteSize(e,n,c),l=Phaser.Math.RND.integerInRange(0,r-s-1);for(let g=0;g<r;g++)if(g<l||g>=l+s){let r=n;g==l+s&&i?r=i:g==l-1&&o&&(r=o),PhaserExtras.addGroupSprite(e,t,a+g*d.height,r,h,c)}}static RandomVerticalObstacleGenerator(e,t,a,r,s,n,o,i,h){var c=PhaserExtras.getSpriteSize(e,s,h),d=Phaser.Math.RND.integerInRange(0,r);"top"===i&&(a-=c.height);for(let r=1;r<=d;r++)"top"===i?PhaserExtras.addGroupSprite(e,t,a+r*c.height,n&&r===d?n:s,o,h):PhaserExtras.addGroupSprite(e,t,a-r*c.height,n&&r===d?n:s,o,h)}static MatrixBlockGenerator(e,t,a,r=0,s=0,n=10,o,i){let h=0;var c,d,l=PhaserExtras.getSpriteSize(e,t,i),g=l.width+n,w=l.height+n;for(let n=0;n<=7;n++)for(let l=0;l<=7;l++)a[h++]&&(c=l*g+r,d=n*w+s,PhaserExtras.addGroupSprite(e,c,d,t,o,i))}static getSpriteSize(e,t,a){var r=e.textures.get(t);let s=r?.source?.[0]?.width,n=r?.source?.[0]?.height;return s&&n&&!a||((r=e.physics.add.sprite(0,0,t)).visible=!1,a&&"function"==typeof a&&a(r),s=r.width,n=r.height,r.destroy()),{width:s,height:n}}static takeScreenshot(e){if(e&&e.canvas){let r=e.canvas.width,s=e.canvas.height;r/s>270/152?(r=270,s=r/e.canvas.width*e.canvas.height):(s=152,r=s/e.canvas.height*e.canvas.width);var t=document.createElement("canvas"),a=(t.width=270,t.height=152,t.getContext("2d"));return a.fillStyle="rgba(0, 0, 0, 0)",a.fillRect(0,0,t.width,t.height),a.drawImage(e.canvas,0,0,e.canvas.width,e.canvas.height,(270-r)/2,(152-s)/2,r,s),t.toDataURL()}console.warn("Unable to take screenshot for ",e,"!")}static showScreenshot(e){var t=new Image;t.src=PhaserExtras.takeScreenshot(e),window.open("").document.write(t.outerHTML)}static sendScreenshot(e){(e=PhaserExtras.takeScreenshot(e))&&window.parent&&window.parent.postMessage({type:"screenshot",value:e},""+window.location.origin)}}document.addEventListener("DOMContentLoaded",(function(){(new PhaserExtras).clear()})),window.location.pathname.endsWith("/screenshot")&&window.addEventListener("load",(function(){window.setTimeout((()=>{PhaserExtras.sendScreenshot(window.game)}),750)}));