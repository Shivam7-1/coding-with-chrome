/*! For license information please see phaser_extras.js.LICENSE.txt */
class PhaserExtras{clear(){const e=document.getElementsByTagName("canvas");if(e)for(const t of e)t.style&&"none"==t.style.touchAction&&"none"==t.style.userSelect&&t.remove();document.getElementById("ghostery-tracker-tally")?.remove(),document.getElementById("ghostery-box")?.remove(),document.getElementById("ghostery-pb-background")?.remove()}static addGroupSprite(e,t,a,n,r,s){const o=e.add.sprite(t,a,n);r&&r.add(o),e.physics.arcade.enable(o),o.checkWorldBounds=!0,o.outOfBoundsKill=!0,o.z=100,s&&"function"==typeof s&&s(o)}static VerticalObstacleGenerator(e,t,a,n,r,s,o,i,c,h){const d=PhaserExtras.getSpriteSize(e,s,h),l=e.rnd.integerInRange(0,n-r-1);for(let g=0;g<n;g++)if(g<l||g>=l+r){let n=s;g==l+r&&i?n=i:g==l-1&&o&&(n=o),PhaserExtras.addGroupSprite(e,t,a+g*d.height,n,c,h)}}static RandomVerticalObstacleGenerator(e,t,a,n,r,s,o,i,c){const h=PhaserExtras.getSpriteSize(e,r,c),d=e.rnd.integerInRange(0,n);"top"===i&&(a-=h.height);for(let n=1;n<=d;n++)"top"===i?PhaserExtras.addGroupSprite(e,t,a+n*h.height,s&&n===d?s:r,o,c):PhaserExtras.addGroupSprite(e,t,a-n*h.height,s&&n===d?s:r,o,c)}static MatrixBlockGenerator(e,t,a,n=0,r=0,s=10,o,i){let c=0;const h=PhaserExtras.getSpriteSize(e,t,i);for(let d=0;d<=7;d++)for(let l=0;l<=7;l++)if(a[c++]){const a=l*(h.width+s)+n,c=d*(h.height+s)+r;PhaserExtras.addGroupSprite(e,a,c,t,o,i)}}static getSpriteSize(e,t,a){let n=e.cache.getImage(t).width,r=e.cache.getImage(t).width;if(a){const s=e.add.sprite(0,0,t);e.physics.arcade.enable(s),s.visible=!1,a(s),n=s.width,r=s.height,s.destroy()}return{width:n,height:r}}static takeScreenshot(e){let t=e.canvas.width,a=e.canvas.height;t/a>270/152?(t=270,a=t/e.canvas.width*e.canvas.height):(a=152,t=a/e.canvas.height*e.canvas.width);const n=document.createElement("canvas");n.width=270,n.height=152;const r=n.getContext("2d");return r.fillStyle="rgba(0, 0, 0, 0)",r.fillRect(0,0,n.width,n.height),r.drawImage(e.canvas,0,0,e.canvas.width,e.canvas.height,(270-t)/2,(152-a)/2,t,a),n.toDataURL()}static showScreenshot(e){const t=new Image;t.src=PhaserExtras.takeScreenshot(e);window.open("").document.write(t.outerHTML)}static sendScreenshot(e){const t=PhaserExtras.takeScreenshot(e);t&&window.parent&&window.parent.postMessage({type:"screenshot",value:t},`${window.location.origin}`)}}document.addEventListener("DOMContentLoaded",(function(){(new PhaserExtras).clear()})),window.location.pathname.endsWith("/screenshot")&&window.addEventListener("load",(function(){window.setTimeout((()=>{PhaserExtras.sendScreenshot(window.game)}),750)}));